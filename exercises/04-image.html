<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <link href="../css/exercise.css" rel="stylesheet" type="text/css">
</head>
<body>
    <h1>04 - Image Exclusions</h1>
    <p>We can also create exclusions using the transparent area of images. In this case,
    we want to find the minimum and maximum x values for non-transparent pixels within
    the the y range of a line.</p>
    <iframe src="../demos/image.html" width="200" height="200"></iframe>
    <p><a href="../demos/image.html">fullsize sample</a></p>
    <p>For this problem, you can assume you have access to an Image class that behaves as follows:</p>
    <code><pre>
var image = new Image("my-image.png");
var x = image.x;
var y = image.y;
var width = image.width;
var height = image.height;
// Determine whether an image pixel is
// transparent or not.
var alphaAtx10y20 = image.isPixelTransparent(10, 20);
    </pre></code>

<p><em>Note:</em> An image pixel coordinate is relative to the image's origin at (<code>image.x</code>, <code>image.y</code>). You can call <code>isPixelTransparent</code> on x values from <code>0</code> to <code>image.width</code>, and y values from <code>0</code> to <code>image.height</code>. If the image is positioned at (10, 20), and you call <code>image.isPixelTransparent(30, 40)</code>, you will be retrieving information at (40, 60) relative to the line's coordinates.</p>

<div class="page-break"></div>

<p>Let's start off by finding the minimum and maximum x values of an image's
opaque pixels at a given y. The input y and output x values should be in the
line's coordinate system.</p>

<code><pre>
/**
 * Find the minimum and maximum x values of the opaque
 * pixels in an image at a given y. All input and output
 * values should be in the line's coordinate system.
 * Return null if there are no transparent pixels at y.
 * @param {Image} image
 * @param {Number} y
 * @returns {{ xMin: Number, xMax: Number }|null}
 */
function findXMinMaxAtY(image, y) {
</pre></code>

<div class="page-break"></div>

<p>Let's start off by finding the minimum and maximum x values of opaque pixels
in the image between the line's minimum and maximum y values.</p>

<code><pre>
/**
 * Find the minimum and maximum x values of opaque pixels
 * in an image between the line's y values.
 * @param {Image} image
 * @param {{ yMin: Number, yMax: Number }} line
 * @returns {{ xMin: Number, xMax: Number }|null}
 */
function findXMinMax(image, line) {
</pre></code>

<div class="page-break"></div>

<p>One of the ways we can make our algorithm run faster is to store the minimum
and maximum x values of opaque pixels in a cache.
Because we have a fixed number of pixel rows (with values from <code>0</code> to <code>image.height</code>),
we can store these values in an array.</p>

<p><em>Note:</em> This function works in the image's coordinate system, with x values
ranging from <code>0</code> to <code>image.width</code>, and y values ranging from <code>0</code> to <code>image.height</code>.</p>

<code><pre>
/**
 * Generate an array storing the minimum and
 * maximum x values of opaque pixels at a given
 * y value in the image.
 * If there are no opaque pixels in that row,
 * the array should contain null for that y value.
 * cache[10] should contain the information for the
 * image pixels at y = 10.
 * @param { Image } image
 * @returns { Array.&lt;{ xMin: Number, xMax: Number }&gt; }
 */
function generateXMinMaxCache(image) {
</pre></code>

<div class="page-break"></div>

<p>Finally, use the cache to write a more efficient solution to our original problem.
You can assume that we have already generated the cache using your <code>generateXMinMaxCache</code> method.
You may want to rewrite your <code>findXMinMaxAtY</code> method using the cache as well.</p>

<code><pre>
/**
 * Find the minimum and maximum x values of opaque pixels
 * in an image between the line's y values.
 * @param {Image} image
 * @param { Array.&lt;{ xMin: Number, xMax: Number }&gt;} cache
 * @param {{ yMin: Number, yMax: Number }} line
 * @returns {{ xMin: Number, xMax: Number }|null}
 */
function findXMinMax(image, cache, line) {
</pre></code>

</body>
</html>
